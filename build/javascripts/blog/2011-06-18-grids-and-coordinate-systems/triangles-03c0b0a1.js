!function(){$(document).ready(function(){var t,l,r,e,a,n,o,u,h,f,p,s,i,d,c,M,g,k,m,v,w,x,L,b,q,y,F,Z,_,z,B,R,X,Y,j,A,C,D,E,G,H,I,J,K,N;for(i=80,_=$("#paper").width(),u=$("#paper").height(),B=_/2,X=u/2,n=7,M={},k=[],L=[],F=[],$("#paper").mousemove(function(t){var l,r,n,o,u,h,f,p,s,d,c,g,m,v,w,x,b,q,y,Z,_,z,R;for(g=t.pageX-B-$("#paper").offset().left,m=t.pageY-X-$("#paper").offset().top,a.attr({fill:"none",stroke:"black"}),Z=to_uvw(i,g,m),n=Z[0],h=Z[1],s=Z[2],o=k[n],null!=o&&o.attr({fill:"darkred"}),f=L[h],null!=f&&f.attr({fill:"darkblue"}),d=F[s],null!=d&&d.attr({fill:"darkgreen"}),r=((M[n]||{})[h]||{})[s],_=[-1,0,1],v=0,b=_.length;b>v;v++)for(u=_[v],z=[-1,0,1],w=0,q=z.length;q>w;w++)for(p=z[w],R=[-1,0,1],x=0,y=R.length;y>x;x++)c=R[x],l=((M[n+u]||{})[h+p]||{})[s+c],null!=l&&(l.attr({fill:"blue"}),l.toFront);return null!=r&&(r.attr({fill:"red"}),r.toFront()),e.toFront(),$("#xy").html(""+g+", "+m),$("#uvw").html(""+n+" , "+h+", "+s)}),f=Raphael("paper","100%","100%"),s=Math.sqrt(3)*i/6,t=Math.sqrt(3)*i/3,o=Math.sqrt(3)*i/2,d=0,q=0,e=f.set(),a=f.set(),x=C=-n;n>=C?n>=x:x>=n;n>=C?x++:x--)for(y=D=-n;n>=D?n>=y:y>=n;n>=D?y++:y--)for(E=[1-x-y,-x-y],j=0,A=E.length;A>j;j++)g=E[j],d++,q++,G=to_xy(i,g,x,y),z=G[0],R=G[1],z+=B,R+=X,r=f.circle(z,R,1),r.attr({fill:"red",stroke:"none"}),v=0===(g+x+y)%2,v?(p=["M",z,R-t,"L",z+i/2,R+s,"L",z-i/2,R+s,"Z"],l=Math.round(z)+"/"+Math.round(R+x*s)):(p=["M",z,R+t,"L",z+i/2,R-s,"L",z-i/2,R-s,"Z"],l=Math.round(z)+"/"+Math.round(R+x*s+s)),m=null!=(H=k[g])?H:k[g]=f.set(),b=null!=(I=L[x])?I:L[x]=f.set(),Z=null!=(J=F[y])?J:F[y]=f.set(),c=f.path(p),null!=(K=M[g])||(M[g]={}),null!=(N=(Y=M[g])[x])||(Y[x]={}),M[g][x][y]=c,m.push(c),b.push(c),Z.push(c),a.push(c),h=v?i/6:-i/6,w=f.text(z,R+h,""+g+"/"+x+"/"+y),e.push(w),w.attr({fill:"white","font-size":i/6,"text-anchor":"middle"});return a.attr({"stroke-width":1}),a.toBack})}.call(this);