!function(t,s){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.0.0",settings:{index:0,stickyClass:"sticky",custom_back_text:!0,back_text:"Back",init:!1},init:function(i,e,n){var a=this;return this.scope=i||this.scope,"object"==typeof e&&t.extend(!0,this.settings,e),"string"!=typeof e?(t(".top-bar").each(function(){a.settings.$w=t(s),a.settings.$topbar=t(this),a.settings.$section=a.settings.$topbar.find("section"),a.settings.$titlebar=a.settings.$topbar.children("ul").first(),a.settings.$topbar.data("index",0);var i=t("<div class='top-bar-js-breakpoint'/>").insertAfter(a.settings.$topbar);a.settings.breakPoint=i.width(),i.remove(),a.assemble(),a.settings.$topbar.parent().hasClass("fixed")&&t("body").css("padding-top",a.outerHeight(a.settings.$topbar))}),a.settings.init||this.events(),this.settings.init):this[e].call(this,n)},events:function(){var i=this,e=this.outerHeight(t(".top-bar"));t(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar",function(n){var a=t(this).closest(".top-bar"),o=a.find("section, .section");a.children("ul").first(),a.data("height")||i.largestUL(),n.preventDefault(),i.breakpoint()&&a.toggleClass("expanded").css("min-height",""),a.hasClass("expanded")||(o.css({left:"0%"}),o.find(">.name").css({left:"100%"}),o.find("li.moved").removeClass("moved"),a.data("index",0)),a.parent().hasClass("fixed")?(a.parent().removeClass("fixed"),t("body").css("padding-top","0"),s.scrollTo(0)):a.hasClass("fixed expanded")&&(a.parent().addClass("fixed"),t("body").css("padding-top",e))}).on("click.fndtn.topbar",".top-bar .has-dropdown>a",function(s){var e=t(this).closest(".top-bar"),n=e.find("section, .section"),a=e.children("ul").first();if((Modernizr.touch||i.breakpoint())&&s.preventDefault(),i.breakpoint()){var o=t(this),d=o.closest("li");e.data("index",e.data("index")+1),d.addClass("moved"),n.css({left:-(100*e.data("index"))+"%"}),n.find(">.name").css({left:100*e.data("index")+"%"}),o.siblings("ul").height(e.data("height")+i.outerHeight(a,!0)),e.css("min-height",e.data("height")+2*i.outerHeight(a,!0))}}),t(s).on("resize.fndtn.topbar",function(){this.breakpoint()||t(".top-bar").css("min-height","")}.bind(this)),t(this.scope).on("click.fndtn",".top-bar .has-dropdown .back",function(s){s.preventDefault();var i=t(this),e=i.closest(".top-bar"),n=e.find("section, .section"),a=i.closest("li.moved");a.parent(),e.data("index",e.data("index")-1),n.css({left:-(100*e.data("index"))+"%"}),n.find(">.name").css({left:100*e.data("index")+"%"}),0===e.data("index")&&e.css("min-height",0),setTimeout(function(){a.removeClass("moved")},300)})},breakpoint:function(){return t(s).width()<=this.settings.breakPoint||t("html").hasClass("lt-ie9")},assemble:function(){var s=this;this.settings.$section.detach(),this.settings.$section.find(".has-dropdown>a").each(function(){var i=t(this),e=i.siblings(".dropdown"),n=t('<li class="title back js-generated"><h5><a href="#"></a></h5></li>');1==s.settings.custom_back_text?n.find("h5>a").html("&laquo; "+s.settings.back_text):n.find("h5>a").html("&laquo; "+i.html()),e.prepend(n)}),this.settings.$section.appendTo(this.settings.$topbar),this.sticky()},largestUL:function(){var s=this.settings.$topbar.find("section ul ul"),i=s.first(),e=0,n=this;s.each(function(){t(this).children("li").length>i.children("li").length&&(i=t(this))}),i.children("li").each(function(){e+=n.outerHeight(t(this),!0)}),this.settings.$topbar.data("height",e)},sticky:function(){var i="."+this.settings.stickyClass;if(t(i).length>0){var e=t(i).length?t(i).offset().top:0,n=t(s),a=this.outerHeight(t(".top-bar"));n.scroll(function(){n.scrollTop()>=e?(t(i).addClass("fixed"),t("body").css("padding-top",a)):n.scrollTop()<e&&(t(i).removeClass("fixed"),t("body").css("padding-top","0"))})}},off:function(){t(this.scope).off(".fndtn.topbar"),t(s).off(".fndtn.topbar")}}}(Foundation.zj,this,this.document);